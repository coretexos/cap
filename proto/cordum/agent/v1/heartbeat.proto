syntax = "proto3";

package cordum.agent.v1;

option go_package = "github.com/cordum/cap/v2/cordum/agent/v1";
option java_package = "io.cordum.cap.agent.v1";
option java_multiple_files = true;
option csharp_namespace = "Cordum.Agent.V1";
option php_namespace = "cordum\\Agent\\V1";
option ruby_package = "Cordum::Agent::V1";

// Heartbeat advertises worker liveness and load to schedulers.
message Heartbeat {
    string worker_id = 1;           // unique worker identifier
    string region = 2;              // region/zone/cluster hint
    string type = 3;                // capability class (cpu, gpu, cpu-tools)
    float cpu_load = 4;             // 0-100
    float gpu_utilization = 5;      // 0-100
    int32 active_jobs = 6;          // current in-flight jobs
    repeated string capabilities = 7; // freeform skill descriptors
    // field numbers 8-10 are reserved to allow future extensions
    string pool = 11;               // pool name (often tied to job subject)
    int32 max_parallel_jobs = 12;   // advertised concurrency limit
    map<string, string> labels = 13; // optional placement labels
}
